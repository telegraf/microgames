var s_iScaleFactor=1;var s_iOffsetX;var s_iOffsetY;(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))})(navigator.userAgent||navigator.vendor||window.opera);$(window).resize(function(){sizeHandler()});function trace(szMsg){console.log(szMsg)}function getSize(Name){var size;var name=Name.toLowerCase();var document=window.document;var documentElement=document.documentElement;if(window["inner"+Name]===undefined){size=documentElement["client"+Name]}else if(window["inner"+Name]!=documentElement["client"+Name]){var bodyElement=document.createElement("body");bodyElement.id="vpw-test-b";bodyElement.style.cssText="overflow:scroll";var divElement=document.createElement("div");divElement.id="vpw-test-d";divElement.style.cssText="position:absolute;top:-1000px";divElement.innerHTML="<style>@media("+name+":"+documentElement["client"+Name]+"px){body#vpw-test-b div#vpw-test-d{"+name+":7px!important}}</style>";bodyElement.appendChild(divElement);documentElement.insertBefore(bodyElement,document.head);if(divElement["offset"+Name]==7){size=documentElement["client"+Name]}else{size=window["inner"+Name]}documentElement.removeChild(bodyElement)}else{size=window["inner"+Name]}return size}function sizeHandler(){window.scrollTo(0,1);if(!$("#canvas")){return}var h;var iOS=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?true:false;if(iOS){h=getIOSWindowHeight()}else{h=getSize("Height")}var w=getSize("Width");var multiplier=Math.min(h/CANVAS_HEIGHT,w/CANVAS_WIDTH);var destW=CANVAS_WIDTH*multiplier;var destH=CANVAS_HEIGHT*multiplier;var iAdd=0;if(destH<h){iAdd=h-destH;destH+=iAdd;destW+=iAdd*(CANVAS_WIDTH/CANVAS_HEIGHT)}else if(destW<w){iAdd=w-destW;destW+=iAdd;destH+=iAdd*(CANVAS_HEIGHT/CANVAS_WIDTH)}var fOffsetY=h/2-destH/2;var fOffsetX=w/2-destW/2;var fGameInverseScaling=CANVAS_WIDTH/destW;if(fOffsetX*fGameInverseScaling<-EDGEBOARD_X||fOffsetY*fGameInverseScaling<-EDGEBOARD_Y){multiplier=Math.min(h/(CANVAS_HEIGHT-EDGEBOARD_Y*2),w/(CANVAS_WIDTH-EDGEBOARD_X*2));destW=CANVAS_WIDTH*multiplier;destH=CANVAS_HEIGHT*multiplier;fOffsetY=(h-destH)/2;fOffsetX=(w-destW)/2;fGameInverseScaling=CANVAS_WIDTH/destW}s_iOffsetX=-1*fOffsetX*fGameInverseScaling;s_iOffsetY=-1*fOffsetY*fGameInverseScaling;if(fOffsetY>=0){s_iOffsetY=0}if(fOffsetX>=0){s_iOffsetX=0}if(s_oInterface!==null){s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY)}if(s_oMenu!==null){s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY)}$("#canvas").css("width",destW+"px");$("#canvas").css("height",destH+"px");if(fOffsetY<0){$("#canvas").css("top",fOffsetY+"px")}else{$("#canvas").css("top","0px")}$("#canvas").css("left",fOffsetX+"px")}window.addEventListener("orientationchange",onOrientationChange);function onOrientationChange(){if(window.matchMedia("(orientation: portrait)").matches){sizeHandler()}if(window.matchMedia("(orientation: landscape)").matches){sizeHandler()}}function isIOS(){var iDevices=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];while(iDevices.length){if(navigator.platform===iDevices.pop()){s_bIsIphone=true;return true}}s_bIsIphone=false;return false}function getIOSWindowHeight(){var zoomLevel=document.documentElement.clientWidth/window.innerWidth;return window.innerHeight*zoomLevel}function getHeightOfIOSToolbars(){var tH=(window.orientation===0?screen.height:screen.width)-getIOSWindowHeight();return tH>1?tH:0}function playSound(szSound,iVolume,iLoop){if(DISABLE_SOUND_MOBILE===false||s_bMobile===false){var oPointer=createjs.Sound.play(szSound,{loop:iLoop,volume:iVolume});return oPointer}return null}function stopSound(oPointer){if(DISABLE_SOUND_MOBILE===false||s_bMobile===false){oPointer.stop()}}function setVolume(oPointer,iVolume){if(DISABLE_SOUND_MOBILE===false||s_bMobile===false){oPointer.volume=iVolume}}function setMute(oPointer,bMute){if(DISABLE_SOUND_MOBILE===false||s_bMobile===false){oPointer.setMute(bMute)}}function createBitmap(oSprite,iWidth,iHeight){var oBmp=new createjs.Bitmap(oSprite);var hitObject=new createjs.Shape;if(iWidth&&iHeight){hitObject.graphics.beginFill("#fff").drawRect(0,0,iWidth,iHeight)}else{hitObject.graphics.beginFill("#ff0").drawRect(0,0,oSprite.width,oSprite.height)}oBmp.hitArea=hitObject;return oBmp}function createSprite(oSpriteSheet,szState,iRegX,iRegY,iWidth,iHeight){if(szState!==null){var oRetSprite=new createjs.Sprite(oSpriteSheet,szState)}else{var oRetSprite=new createjs.Sprite(oSpriteSheet)}var hitObject=new createjs.Shape;hitObject.graphics.beginFill("#000000").drawRect(-iRegX,-iRegY,iWidth,iHeight);oRetSprite.hitArea=hitObject;return oRetSprite}function randomFloatBetween(minValue,maxValue,precision){if(typeof precision==="undefined"){precision=2}return parseFloat(Math.min(minValue+Math.random()*(maxValue-minValue),maxValue).toFixed(precision))}function tweenVectorsOnX(vStart,vEnd,iLerp){var iNewX=vStart+iLerp*(vEnd-vStart);return iNewX}function shuffle(array){var currentIndex=array.length,temporaryValue,randomIndex;while(0!==currentIndex){randomIndex=Math.floor(Math.random()*currentIndex);currentIndex-=1;temporaryValue=array[currentIndex];array[currentIndex]=array[randomIndex];array[randomIndex]=temporaryValue}return array}function bubbleSort(a){var swapped;do{swapped=false;for(var i=0;i<a.length-1;i++){if(a[i]>a[i+1]){var temp=a[i];a[i]=a[i+1];a[i+1]=temp;swapped=true}}}while(swapped)}function compare(a,b){if(a.index>b.index)return-1;if(a.index<b.index)return 1;return 0}function easeLinear(t,b,c,d){return c*t/d+b}function easeInQuad(t,b,c,d){return c*(t/=d)*t+b}function easeInSine(t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b}function easeInCubic(t,b,c,d){return c*(t/=d)*t*t+b}function getTrajectoryPoint(t,p){var result=new createjs.Point;var oneMinusTSq=(1-t)*(1-t);var TSq=t*t;result.x=oneMinusTSq*p.start.x+2*(1-t)*t*p.traj.x+TSq*p.end.x;result.y=oneMinusTSq*p.start.y+2*(1-t)*t*p.traj.y+TSq*p.end.y;return result}function formatTime(iTime){iTime/=1e3;var iMins=Math.floor(iTime/60);var iSecs=iTime-iMins*60;iSecs=parseFloat(iSecs).toFixed(1);var szRet="";if(iMins<10){szRet+="0"+iMins+":"}else{szRet+=iMins+":"}if(iSecs<10){szRet+="0"+iSecs}else{szRet+=iSecs}return szRet}function degreesToRadians(iAngle){return iAngle*Math.PI/180}function checkRectCollision(bitmap1,bitmap2){var b1,b2;b1=getBounds(bitmap1,.9);b2=getBounds(bitmap2,.98);return calculateIntersection(b1,b2)}function calculateIntersection(rect1,rect2){var dx,dy,r1={},r2={};r1.cx=rect1.x+(r1.hw=rect1.width/2);r1.cy=rect1.y+(r1.hh=rect1.height/2);r2.cx=rect2.x+(r2.hw=rect2.width/2);r2.cy=rect2.y+(r2.hh=rect2.height/2);dx=Math.abs(r1.cx-r2.cx)-(r1.hw+r2.hw);dy=Math.abs(r1.cy-r2.cy)-(r1.hh+r2.hh);if(dx<0&&dy<0){dx=Math.min(Math.min(rect1.width,rect2.width),-dx);dy=Math.min(Math.min(rect1.height,rect2.height),-dy);return{x:Math.max(rect1.x,rect2.x),y:Math.max(rect1.y,rect2.y),width:dx,height:dy,rect1:rect1,rect2:rect2}}else{return null}}function getBounds(obj,iTolerance){var bounds={x:Infinity,y:Infinity,width:0,height:0};if(obj instanceof createjs.Container){bounds.x2=-Infinity;bounds.y2=-Infinity;var children=obj.children,l=children.length,cbounds,c;for(c=0;c<l;c++){cbounds=getBounds(children[c],1);if(cbounds.x<bounds.x)bounds.x=cbounds.x;if(cbounds.y<bounds.y)bounds.y=cbounds.y;if(cbounds.x+cbounds.width>bounds.x2)bounds.x2=cbounds.x+cbounds.width;if(cbounds.y+cbounds.height>bounds.y2)bounds.y2=cbounds.y+cbounds.height}if(bounds.x==Infinity)bounds.x=0;if(bounds.y==Infinity)bounds.y=0;if(bounds.x2==Infinity)bounds.x2=0;if(bounds.y2==Infinity)bounds.y2=0;bounds.width=bounds.x2-bounds.x;bounds.height=bounds.y2-bounds.y;delete bounds.x2;delete bounds.y2}else{var gp,gp2,gp3,gp4,imgr={},sr;if(obj instanceof createjs.Bitmap){sr=obj.sourceRect||obj.image;imgr.width=sr.width*iTolerance;imgr.height=sr.height*iTolerance}else if(obj instanceof createjs.Sprite){if(obj.spriteSheet._frames&&obj.spriteSheet._frames[obj.currentFrame]&&obj.spriteSheet._frames[obj.currentFrame].image){var cframe=obj.spriteSheet.getFrame(obj.currentFrame);imgr.width=cframe.rect.width;imgr.height=cframe.rect.height;imgr.regX=cframe.regX;imgr.regY=cframe.regY}else{bounds.x=obj.x||0;bounds.y=obj.y||0}}else{bounds.x=obj.x||0;bounds.y=obj.y||0}imgr.regX=imgr.regX||0;imgr.width=imgr.width||0;imgr.regY=imgr.regY||0;imgr.height=imgr.height||0;bounds.regX=imgr.regX;bounds.regY=imgr.regY;gp=obj.localToGlobal(0-imgr.regX,0-imgr.regY);gp2=obj.localToGlobal(imgr.width-imgr.regX,imgr.height-imgr.regY);gp3=obj.localToGlobal(imgr.width-imgr.regX,0-imgr.regY);gp4=obj.localToGlobal(0-imgr.regX,imgr.height-imgr.regY);bounds.x=Math.min(Math.min(Math.min(gp.x,gp2.x),gp3.x),gp4.x);bounds.y=Math.min(Math.min(Math.min(gp.y,gp2.y),gp3.y),gp4.y);bounds.width=Math.max(Math.max(Math.max(gp.x,gp2.x),gp3.x),gp4.x)-bounds.x;bounds.height=Math.max(Math.max(Math.max(gp.y,gp2.y),gp3.y),gp4.y)-bounds.y}return bounds}function NoClickDelay(el){this.element=el;if(window.Touch)this.element.addEventListener("touchstart",this,false)}function shuffle(array){var counter=array.length,temp,index;while(counter>0){index=Math.floor(Math.random()*counter);counter--;temp=array[counter];array[counter]=array[index];array[index]=temp}return array}NoClickDelay.prototype={handleEvent:function(e){switch(e.type){case"touchstart":this.onTouchStart(e);break;case"touchmove":this.onTouchMove(e);break;case"touchend":this.onTouchEnd(e);break}},onTouchStart:function(e){e.preventDefault();this.moved=false;this.element.addEventListener("touchmove",this,false);this.element.addEventListener("touchend",this,false)},onTouchMove:function(e){this.moved=true},onTouchEnd:function(e){this.element.removeEventListener("touchmove",this,false);this.element.removeEventListener("touchend",this,false);if(!this.moved){var theTarget=document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY);if(theTarget.nodeType==3)theTarget=theTarget.parentNode;var theEvent=document.createEvent("MouseEvents");theEvent.initEvent("click",true,true);theTarget.dispatchEvent(theEvent)}}};(function(){var hidden="hidden";if(hidden in document)document.addEventListener("visibilitychange",onchange);else if((hidden="mozHidden")in document)document.addEventListener("mozvisibilitychange",onchange);else if((hidden="webkitHidden")in document)document.addEventListener("webkitvisibilitychange",onchange);else if((hidden="msHidden")in document)document.addEventListener("msvisibilitychange",onchange);else if("onfocusin"in document)document.onfocusin=document.onfocusout=onchange;else window.onpageshow=window.onpagehide=window.onfocus=window.onblur=onchange;function onchange(evt){var v="visible",h="hidden",evtMap={focus:v,focusin:v,pageshow:v,blur:h,focusout:h,pagehide:h};evt=evt||window.event;if(evt.type in evtMap){document.body.className=evtMap[evt.type]}else{document.body.className=this[hidden]?"hidden":"visible";if(document.body.className==="hidden"){s_oMain.stopUpdate()}else{s_oMain.startUpdate()}}}})();function ctlArcadeResume(){if(s_oMain!==null){s_oMain.startUpdate()}}function ctlArcadePause(){if(s_oMain!==null){s_oMain.stopUpdate()}}function getParamValue(paramName){var url=window.location.search.substring(1);var qArray=url.split("&");for(var i=0;i<qArray.length;i++){var pArr=qArray[i].split("=");if(pArr[0]==paramName)return pArr[1]}}function CSpriteLibrary(){var _oLibSprites;var _iNumSprites;var _iCntSprites;var _cbCompleted;var _cbTotalCompleted;var _cbOwner;this.init=function(cbCompleted,cbTotalCompleted,cbOwner){_iNumSprites=0;_iCntSprites=0;_cbCompleted=cbCompleted;_cbTotalCompleted=cbTotalCompleted;_cbOwner=cbOwner;_oLibSprites={}};this.addSprite=function(szKey,szPath){if(_oLibSprites.hasOwnProperty(szKey)){return}_oLibSprites[szKey]={szPath:szPath,oSprite:new Image};_iNumSprites++};this.getSprite=function(szKey){if(!_oLibSprites.hasOwnProperty(szKey)){return null}else{return _oLibSprites[szKey].oSprite}};this._onSpritesLoaded=function(){_cbTotalCompleted.call(_cbOwner)};this._onSpriteLoaded=function(){_cbCompleted.call(_cbOwner);if(++_iCntSprites==_iNumSprites){this._onSpritesLoaded()}};this.loadSprites=function(){for(var szKey in _oLibSprites){_oLibSprites[szKey].oSprite["oSpriteLibrary"]=this;_oLibSprites[szKey].oSprite.onload=function(){this.oSpriteLibrary._onSpriteLoaded()};_oLibSprites[szKey].oSprite.src=_oLibSprites[szKey].szPath}};this.getNumSprites=function(){return _iNumSprites}}var CANVAS_WIDTH=1080;var CANVAS_HEIGHT=1136;var EDGEBOARD_X=220;var EDGEBOARD_Y=0;var FPS_TIME=1e3/24;var DISABLE_SOUND_MOBILE=false;var PRIMARY_FONT="walibi";var STATE_LOADING=0;var STATE_MENU=1;var STATE_HELP=1;var STATE_GAME=3;var ON_MOUSE_DOWN=0;var ON_MOUSE_UP=1;var ON_MOUSE_OVER=2;var ON_MOUSE_OUT=3;var ON_DRAG_START=4;var ON_DRAG_END=5;var H_MOVE=37;var V_MOVE=50;var LEVEL_TIME;var MAX_LEVEL_DIFFICULTY=20;var SCORE_IN_NEST;var SCORE_WITH_FLY;var SCORE_DEATH;var UNLOAD_OFFSET=100;var TURTLE_OFFSET=74;var NUM_CONSECUTIVE_TURTLE_0=3;var NUM_CONSECUTIVE_TURTLE_3=2;var SINK_TURTLE_OCCURRENCY;var NUM_LEVEL_INCREASE_SINK;var TIME_FLY_TO_SPAWN;var TIME_FLY_TO_DISAPPEAR;var FROG_STARTING_LOGIC_POS={row:0,col:8};var LIVES;var FROG_SPEED;var STREET_LANE_SPEED=new Array;var STREET_SPEED_DECREASE_PER_LEVEL=new Array;var STREET_LANE_OCCURENCE=new Array;var STREET_OCCURENCE_DECREASE_PER_LEVEL=new Array;var WATER_LANE_TIMESPEED=new Array;var WATER_TIMESPEED_DECREASE_PER_LEVEL=new Array;var WATER_LANE_OCCURENCE=new Array;var WATER_OCCURENCE_INCREASE_PER_LEVEL=new Array;TEXT_GAMEOVER="GAME OVER";TEXT_SCORE="SCORE";TEXT_PLAY="PLAY";TEXT_RESTART="RESTART";TEXT_TIME="TIME";TEXT_SCORE="SCORE";TEXT_LEVELEND="LEVEL ";TEXT_COMPLETEEND=" COMPLETE";TEXT_SPLAT="SPLAT!";TEXT_DROWN="GLU GLU..";TEXT_CRASH="BONK!";TEXT_GREAT="GREAT!!";TEXT_HELP1="USE ARROWS KEYS TO REACH THE OTHER SIDE OF THE RIVER BEFORE TIME RUNS OUT. TO COMPLETE A LEVEL, YOU HAVE TO PUT A FROG ON EACH OF THE 5 COVES";TEXT_HELP2="DONâ€™T GET DRIVEN OVER BY CARS ALONG THE STREET";TEXT_HELP3="USE THE FLOATING TRUNKS OR TURTLE SHELLS TO CROSS THE RIVER";TEXT_HELP4="IF YOU CATCH A FLY, YOU GET EXTRA POINTS";TEXT_HELP_MOB1="SWIPE TO REACH THE OTHER SIDE OF THE RIVER BEFORE TIME RUNS OUT. TO COMPLETE A LEVEL, YOU HAVE TO PUT A FROG ON EACH OF THE 5 COVES";TEXT_SHARE_IMAGE="200x200.jpg";TEXT_SHARE_TITLE="Congratulations!";TEXT_SHARE_MSG1="You collected <strong>";TEXT_SHARE_MSG2=" points</strong>!<br><br>Share your score with your friends!";TEXT_SHARE_SHARE1="My score is ";TEXT_SHARE_SHARE2=" points! Can you do better";function CPreloader(){var _iMaskWidth;var _iMaskHeight;var _oLoadingText;var _oProgressBar;var _oMaskPreloader;var _oFade;var _oContainer;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.loadSprites();_oContainer=new createjs.Container;s_oStage.addChild(_oContainer)};this.unload=function(){_oContainer.removeAllChildren()};this.hide=function(){var oParent=this;setTimeout(function(){createjs.Tween.get(_oFade).to({alpha:1},500).call(function(){oParent.unload();s_oMain.gotoMenu()})},1e3)};this._onImagesLoaded=function(){};this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};this.attachSprites=function(){var oBg=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));_oContainer.addChild(oBg);var oSprite=s_oSpriteLibrary.getSprite("progress_bar");_oProgressBar=createBitmap(oSprite);_oProgressBar.x=CANVAS_WIDTH/2-oSprite.width/2;_oProgressBar.y=CANVAS_HEIGHT-170;_oContainer.addChild(_oProgressBar);_iMaskWidth=oSprite.width;_iMaskHeight=oSprite.height;_oMaskPreloader=new createjs.Shape;_oMaskPreloader.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(_oProgressBar.x,_oProgressBar.y,1,_iMaskHeight);_oContainer.addChild(_oMaskPreloader);_oProgressBar.mask=_oMaskPreloader;_oLoadingText=new createjs.Text("","30px "+PRIMARY_FONT,"#fff");_oLoadingText.x=CANVAS_WIDTH/2;_oLoadingText.y=CANVAS_HEIGHT-125;_oLoadingText.shadow=new createjs.Shadow("#000",2,2,2);_oLoadingText.textBaseline="alphabetic";_oLoadingText.textAlign="center";_oContainer.addChild(_oLoadingText);_oFade=new createjs.Shape;_oFade.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);_oFade.alpha=0;_oContainer.addChild(_oFade)};this.refreshLoader=function(iPerc){_oLoadingText.text=iPerc+"%";_oMaskPreloader.graphics.clear();var iNewMaskWidth=Math.floor(iPerc*_iMaskWidth/100);_oMaskPreloader.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(_oProgressBar.x,_oProgressBar.y,iNewMaskWidth,_iMaskHeight)};this._init()}function CMain(oData){var _bUpdate;var _iCurResource=0;var RESOURCE_TO_LOAD=0;var _iState=STATE_LOADING;var _oData;var _oPreloader;var _oMenu;var _oModeMenu;var _oHelp;var _oGame;this.initContainer=function(){s_oCanvas=document.getElementById("canvas");s_oStage=new createjs.Stage(s_oCanvas);s_oStage.preventSelection=false;createjs.Touch.enable(s_oStage);s_bMobile=jQuery.browser.mobile;if(s_bMobile===false){s_oStage.enableMouseOver(20);$("body").on("contextmenu","#canvas",function(e){return false})}s_iPrevTime=(new Date).getTime();createjs.Ticker.addEventListener("tick",this._update);createjs.Ticker.setFPS(24);if(navigator.userAgent.match(/Windows Phone/i)){DISABLE_SOUND_MOBILE=true}s_oSpriteLibrary=new CSpriteLibrary;_oPreloader=new CPreloader};this.preloaderReady=function(){if(DISABLE_SOUND_MOBILE===false||s_bMobile===false){this._initSounds()}this._loadImages();_bUpdate=true};this.soundLoaded=function(){_iCurResource++;var iPerc=Math.floor(_iCurResource/RESOURCE_TO_LOAD*100);_oPreloader.refreshLoader(iPerc);if(_iCurResource===RESOURCE_TO_LOAD){_oPreloader.unload();s_oSoundtrack=playSound("soundtrack",1,-1);this.gotoMenu()}};this._initSounds=function(){if(!createjs.Sound.initializeDefaultPlugins()){return}if(navigator.userAgent.indexOf("Opera")>0||navigator.userAgent.indexOf("OPR")>0){createjs.Sound.alternateExtensions=["mp3"];createjs.Sound.addEventListener("fileload",createjs.proxy(this.soundLoaded,this));createjs.Sound.registerSound("./sounds/fr_soundtrack.ogg","soundtrack");createjs.Sound.registerSound("./sounds/press_button.ogg","click");createjs.Sound.registerSound("./sounds/fr_game_over.ogg","game_over");createjs.Sound.registerSound("./sounds/fr_frog_arrived.ogg","frog_arrived");createjs.Sound.registerSound("./sounds/fr_frog_death_road.ogg","splat");createjs.Sound.registerSound("./sounds/fr_frog_death_water.ogg","drown");createjs.Sound.registerSound("./sounds/fr_frog_jump.ogg","jump",5);createjs.Sound.registerSound("./sounds/fr_power_up.ogg","eat_fly");createjs.Sound.registerSound("./sounds/fr_win_level.ogg","win_level");createjs.Sound.registerSound("./sounds/fr_horn_1.ogg","big_hornet");createjs.Sound.registerSound("./sounds/fr_horn_2.ogg","small_hornet")}else{createjs.Sound.alternateExtensions=["ogg"];createjs.Sound.addEventListener("fileload",createjs.proxy(this.soundLoaded,this));createjs.Sound.registerSound("./sounds/fr_soundtrack.mp3","soundtrack");createjs.Sound.registerSound("./sounds/press_button.mp3","click");createjs.Sound.registerSound("./sounds/fr_game_over.mp3","game_over");createjs.Sound.registerSound("./sounds/fr_frog_arrived.mp3","frog_arrived");createjs.Sound.registerSound("./sounds/fr_frog_death_road.mp3","splat");createjs.Sound.registerSound("./sounds/fr_frog_death_water.mp3","drown");createjs.Sound.registerSound("./sounds/fr_frog_jump.mp3","jump",5);createjs.Sound.registerSound("./sounds/fr_power_up.mp3","eat_fly");createjs.Sound.registerSound("./sounds/fr_win_level.mp3","win_level");createjs.Sound.registerSound("./sounds/fr_horn_1.mp3","big_hornet");createjs.Sound.registerSound("./sounds/fr_horn_2.mp3","small_hornet")}RESOURCE_TO_LOAD+=11};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("microgames","./sprites/microgames.png");s_oSpriteLibrary.addSprite("but_play","./sprites/but_play.png");s_oSpriteLibrary.addSprite("msg_box","./sprites/msg_box.png");s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.png");s_oSpriteLibrary.addSprite("gui_panel_bottom","./sprites/gui_panel_bottom.png");s_oSpriteLibrary.addSprite("gui_panel_top","./sprites/gui_panel_top.png");s_oSpriteLibrary.addSprite("life","./sprites/life.png");s_oSpriteLibrary.addSprite("time_bar_frame","./sprites/time_bar_frame.png");s_oSpriteLibrary.addSprite("time_bar_fill","./sprites/time_bar_fill.png");s_oSpriteLibrary.addSprite("bg_help","./sprites/bg_help.png");s_oSpriteLibrary.addSprite("bg_help_desktop","./sprites/bg_help_desktop.png");s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png");s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png");s_oSpriteLibrary.addSprite("but_up","./sprites/but_up.png");s_oSpriteLibrary.addSprite("but_down","./sprites/but_down.png");s_oSpriteLibrary.addSprite("but_left","./sprites/but_left.png");s_oSpriteLibrary.addSprite("but_right","./sprites/but_right.png");s_oSpriteLibrary.addSprite("skid_rows","./sprites/skid_rows.png");s_oSpriteLibrary.addSprite("bridge","./sprites/bridge.png");var szTag;for(var i=0;i<10;i++){szTag="water_anim_"+i;s_oSpriteLibrary.addSprite(szTag,"./sprites/"+szTag+".jpg")}var szTag2;for(var i=1;i<11;i++){szTag="car_"+i;szTag2="car_"+(i-1);s_oSpriteLibrary.addSprite(szTag2,"./sprites/"+szTag+".png")}s_oSpriteLibrary.addSprite("trunk","./sprites/trunk.png");s_oSpriteLibrary.addSprite("turtle","./sprites/turtle.png");s_oSpriteLibrary.addSprite("fly","./sprites/fly.png");s_oSpriteLibrary.addSprite("frog","./sprites/frog.png");RESOURCE_TO_LOAD+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};this._onImagesLoaded=function(){_iCurResource++;var iPerc=Math.floor(_iCurResource/RESOURCE_TO_LOAD*100);_oPreloader.refreshLoader(iPerc);if(_iCurResource===RESOURCE_TO_LOAD){_oPreloader.unload();s_oSoundtrack=playSound("soundtrack",1,-1);this.gotoMenu()}};this._onAllImagesLoaded=function(){};this.onAllPreloaderImagesLoaded=function(){this._loadImages()};this.gotoMenu=function(){_oMenu=new CMenu;_iState=STATE_MENU};this.gotoGame=function(bEasyMode){s_bEasyMode=bEasyMode;_oGame=new CGame(_oData);_iState=STATE_GAME;$(s_oMain).trigger("game_start")};this.gotoHelp=function(){_oHelp=new CHelp;_iState=STATE_HELP};this.stopUpdate=function(){_bUpdate=false;createjs.Ticker.paused=true;$("#block_game").css("display","block")};this.startUpdate=function(){s_iPrevTime=(new Date).getTime();_bUpdate=true;createjs.Ticker.paused=false;$("#block_game").css("display","none")};this._update=function(event){if(_bUpdate===false){return}var iCurTime=(new Date).getTime();s_iTimeElaps=iCurTime-s_iPrevTime;s_iCntTime+=s_iTimeElaps;s_iCntFps++;s_iPrevTime=iCurTime;if(s_iCntTime>=1e3){s_iCurFps=s_iCntFps;s_iCntTime-=1e3;s_iCntFps=0}if(_iState===STATE_GAME){_oGame.update()}s_oStage.update(event)};s_oMain=this;_oData=oData;this.initContainer()}var s_bMobile;var s_bEasyMode;var s_bAudioActive=true;var s_iCntTime=0;var s_iTimeElaps=0;var s_iPrevTime=0;var s_iCntFps=0;var s_iCurFps=0;var s_iCurLevel=0;var s_iScore=0;var s_oDrawLayer;var s_oStage;var s_oMain;var s_oSpriteLibrary;var s_oCanvas;var s_oSoundtrack;function CTextButton(iXPos,iYPos,oSprite,szText,szFont,szColor,iFontSize){var _aCbCompleted;var _aCbOwner;var _oButton;var _oText;var _oTextBack;this._init=function(iXPos,iYPos,oSprite,szText,szFont,szColor,iFontSize){_aCbCompleted=new Array;_aCbOwner=new Array;var oButtonBg=createBitmap(oSprite);var iStepShadow=Math.ceil(iFontSize/20);_oTextBack=new createjs.Text(szText,"bold "+iFontSize+"px "+szFont,"#000000");_oTextBack.textAlign="center";_oTextBack.textBaseline="alphabetic";var oBounds=_oTextBack.getBounds();_oTextBack.x=oSprite.width/2+iStepShadow+1;_oTextBack.y=Math.floor(oSprite.height/2)+oBounds.height/3+iStepShadow+1;_oText=new createjs.Text(szText,"bold "+iFontSize+"px "+szFont,szColor);_oText.textAlign="center";_oText.textBaseline="alphabetic";var oBounds=_oText.getBounds();_oText.x=oSprite.width/2;_oText.y=Math.floor(oSprite.height/2)+oBounds.height/3;_oButton=new createjs.Container;_oButton.x=iXPos;_oButton.y=iYPos;_oButton.regX=oSprite.width/2;_oButton.regY=oSprite.height/2;_oButton.addChild(oButtonBg,_oTextBack,_oText);s_oStage.addChild(_oButton);this._initListener()};this.unload=function(){_oButton.off("mousedown");_oButton.off("pressup");s_oStage.removeChild(_oButton)};this.setVisible=function(bVisible){_oButton.visible=bVisible};this._initListener=function(){oParent=this;_oButton.on("mousedown",this.buttonDown);_oButton.on("pressup",this.buttonRelease)};this.addEventListener=function(iEvent,cbCompleted,cbOwner){_aCbCompleted[iEvent]=cbCompleted;_aCbOwner[iEvent]=cbOwner};this.buttonRelease=function(){_oButton.scaleX=1;_oButton.scaleY=1;if(_aCbCompleted[ON_MOUSE_UP]){_aCbCompleted[ON_MOUSE_UP].call(_aCbOwner[ON_MOUSE_UP])}};this.buttonDown=function(){_oButton.scaleX=.9;_oButton.scaleY=.9;if(_aCbCompleted[ON_MOUSE_DOWN]){_aCbCompleted[ON_MOUSE_DOWN].call(_aCbOwner[ON_MOUSE_DOWN])}};this.setTextPosition=function(iY){_oText.y=iY;_oTextBack.y=iY+2};this.setPosition=function(iXPos,iYPos){_oButton.x=iXPos;_oButton.y=iYPos};this.setX=function(iXPos){_oButton.x=iXPos};this.setY=function(iYPos){_oButton.y=iYPos};this.getButtonImage=function(){return _oButton};this.getX=function(){return _oButton.x};this.getY=function(){return _oButton.y};this._init(iXPos,iYPos,oSprite,szText,szFont,szColor,iFontSize);return this}function CToggle(iXPos,iYPos,oSprite,bActive){var _bActive;var _aCbCompleted;var _aCbOwner;var _oButton;this._init=function(iXPos,iYPos,oSprite,bActive){_aCbCompleted=new Array;_aCbOwner=new Array;var oData={images:[oSprite],frames:{width:oSprite.width/2,height:oSprite.height,regX:oSprite.width/2/2,regY:oSprite.height/2},animations:{state_true:[0],state_false:[1]}};var oSpriteSheet=new createjs.SpriteSheet(oData);_bActive=bActive;_oButton=createSprite(oSpriteSheet,"state_"+_bActive,oSprite.width/2/2,oSprite.height/2,oSprite.width/2,oSprite.height);_oButton.x=iXPos;_oButton.y=iYPos;_oButton.stop();s_oStage.addChild(_oButton);this._initListener()};this.unload=function(){_oButton.off("mousedown",this.buttonDown);_oButton.off("pressup",this.buttonRelease);s_oStage.removeChild(_oButton)};this._initListener=function(){_oButton.on("mousedown",this.buttonDown);_oButton.on("pressup",this.buttonRelease)};this.addEventListener=function(iEvent,cbCompleted,cbOwner){_aCbCompleted[iEvent]=cbCompleted;_aCbOwner[iEvent]=cbOwner};this.setActive=function(bActive){_bActive=bActive;_oButton.gotoAndStop("state_"+_bActive)};this.buttonRelease=function(){_oButton.scaleX=1;_oButton.scaleY=1;playSound("click",1,0);_bActive=!_bActive;_oButton.gotoAndStop("state_"+_bActive);if(_aCbCompleted[ON_MOUSE_UP]){_aCbCompleted[ON_MOUSE_UP].call(_aCbOwner[ON_MOUSE_UP],_bActive)}};this.buttonDown=function(){_oButton.scaleX=.9;_oButton.scaleY=.9;if(_aCbCompleted[ON_MOUSE_DOWN]){_aCbCompleted[ON_MOUSE_DOWN].call(_aCbOwner[ON_MOUSE_DOWN])}};this.setPosition=function(iXPos,iYPos){_oButton.x=iXPos;_oButton.y=iYPos};this._init(iXPos,iYPos,oSprite,bActive)}function CGfxButton(iXPos,iYPos,oSprite,iScale){var _aCbCompleted;var _aCbOwner;var _oButton;this._init=function(iXPos,iYPos,oSprite,iScale){_aCbCompleted=new Array;_aCbOwner=new Array;_oButton=createBitmap(oSprite);_oButton.x=iXPos;_oButton.y=iYPos;_oButton.scaleX=iScale;_oButton.scaleY=iScale;_oButton.regX=oSprite.width/2;_oButton.regY=oSprite.height/2;s_oStage.addChild(_oButton);this._initListener()};this.unload=function(){_oButton.off("mousedown",this.buttonDown);_oButton.off("pressup",this.buttonRelease);s_oStage.removeChild(_oButton)};this.setVisible=function(bVisible){_oButton.visible=bVisible};this._initListener=function(){_oButton.on("mousedown",this.buttonDown);_oButton.on("pressup",this.buttonRelease)};this.addEventListener=function(iEvent,cbCompleted,cbOwner){_aCbCompleted[iEvent]=cbCompleted;_aCbOwner[iEvent]=cbOwner};this.buttonRelease=function(){_oButton.scaleX=iScale;_oButton.scaleY=iScale;if(_aCbCompleted[ON_MOUSE_UP]){_aCbCompleted[ON_MOUSE_UP].call(_aCbOwner[ON_MOUSE_UP])}};this.buttonDown=function(){_oButton.scaleX=iScale*.9;_oButton.scaleY=iScale*.9;if(_aCbCompleted[ON_MOUSE_DOWN]){_aCbCompleted[ON_MOUSE_DOWN].call(_aCbOwner[ON_MOUSE_DOWN])}};this.setPosition=function(iXPos,iYPos){_oButton.x=iXPos;_oButton.y=iYPos};this.setX=function(iXPos){_oButton.x=iXPos};this.setY=function(iYPos){_oButton.y=iYPos};this.getButtonImage=function(){return _oButton};this.getX=function(){return _oButton.x};this.getY=function(){return _oButton.y};this._init(iXPos,iYPos,oSprite,iScale);return this}function CMenu(){var _oBg;var _oButPlay;var _oFade;var _oAudioToggle;var _pStartPosAudio;this._init=function(){_oBg=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));s_oStage.addChild(_oBg);var oSprite=s_oSpriteLibrary.getSprite("but_play");_oButPlay=new CTextButton(CANVAS_WIDTH/2,CANVAS_HEIGHT-200,oSprite,TEXT_PLAY,PRIMARY_FONT,"#fcff00",40);_oButPlay.addEventListener(ON_MOUSE_UP,this._onButPlayRelease,this);if(DISABLE_SOUND_MOBILE===false||s_bMobile===false){var oSprite=s_oSpriteLibrary.getSprite("audio_icon");_pStartPosAudio={x:CANVAS_WIDTH-oSprite.height/2-5,y:oSprite.height/2+5};_oAudioToggle=new CToggle(_pStartPosAudio.x,_pStartPosAudio.y,oSprite,s_bAudioActive);_oAudioToggle.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this)}var microgamesSprite=s_oSpriteLibrary.getSprite("microgames");var microgames=createBitmap(microgamesSprite);microgames.x=(CANVAS_WIDTH-microgamesSprite.width)/2;microgames.y=5;s_oStage.addChild(microgames);_oFade=new createjs.Shape;_oFade.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(_oFade);createjs.Tween.get(_oFade).to({alpha:0},1e3).call(function(){_oFade.visible=false});this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.refreshButtonPos=function(iNewX,iNewY){if(DISABLE_SOUND_MOBILE===false||s_bMobile===false){_oAudioToggle.setPosition(_pStartPosAudio.x-iNewX,iNewY+_pStartPosAudio.y)}};this.unload=function(){_oButPlay.unload();_oButPlay=null;if(DISABLE_SOUND_MOBILE===false||s_bMobile===false){_oAudioToggle.unload();
_oAudioToggle=null}s_oStage.removeChild(_oBg);_oBg=null;s_oMenu=null};this._onAudioToggle=function(){createjs.Sound.setMute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onButPlayRelease=function(){this.unload();playSound("click",1,0);$(s_oMain).trigger("start_session");$(s_oMain).trigger("start_level",1);s_oMain.gotoGame()};s_oMenu=this;this._init()}var s_oMenu=null;function CGame(oData){var _bStartGame;var _bBlockMovement;var _bBlockKeyboard;var _bFrogOnSupport;var _bLevelInProgress;var _iLives;var _iNumHorizCel;var _iNumVertCel;var _iFrogInNest;var _iVarInitSinkOccur;var _iTimeFlySpawn;var _aGridMatrix;var _aStreetLaneTimeElaps;var _aWaterLaneTimeElaps;var _aCar;var _aSupport;var _aNest;var _aElementsToRemove;var _aFrogToRemove;var _aSinkTurtleOccur;var _oInterface;var _oEndPanel=null;var _oHelpPanel;var _oParent;var _oWater;var _oFrog;var _oStreet;var _oWaterContainer;var _oSupportContainer;var _oDrownContainer;var _oTrafficContainer;var _oFrogContainer;var _oPosOffset;var _oCurLogicPos;var _oFly;var _oHammer;this._init=function(){_bBlockMovement=true;_bBlockKeyboard=true;s_iScore=0;_iLives=LIVES;_aSinkTurtleOccur=new Array;_iVarInitSinkOccur=SINK_TURTLE_OCCURRENCY;s_iCurLevel=0;setVolume(s_oSoundtrack,.6);var iPixelsEdge={h:11,v:386};_iNumHorizCel=17;_iNumVertCel=15;_oPosOffset={x:(CANVAS_WIDTH-iPixelsEdge.h-EDGEBOARD_X*2)/_iNumHorizCel,y:(CANVAS_HEIGHT-iPixelsEdge.v)/_iNumVertCel};var oStartGridPos={x:iPixelsEdge.h/2+_oPosOffset.x/2+EDGEBOARD_X,y:808};_aGridMatrix=new Array;for(var i=0;i<_iNumVertCel;i++){_aGridMatrix[i]=new Array;for(var j=0;j<_iNumHorizCel;j++){_aGridMatrix[i][j]={x:oStartGridPos.x+_oPosOffset.x*j,y:oStartGridPos.y-_oPosOffset.y*i}}}_oWaterContainer=new createjs.Container;s_oStage.addChild(_oWaterContainer);_oDrownContainer=new createjs.Container;s_oStage.addChild(_oDrownContainer);_oSupportContainer=new createjs.Container;s_oStage.addChild(_oSupportContainer);var oBg=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));s_oStage.addChild(oBg);_oFrogContainer=new createjs.Container;s_oStage.addChild(_oFrogContainer);_oTrafficContainer=new createjs.Container;s_oStage.addChild(_oTrafficContainer);var oSprite=s_oSpriteLibrary.getSprite("bridge");var oBridge0=createBitmap(oSprite);s_oStage.addChild(oBridge0);var oBridge1=createBitmap(oSprite);oBridge1.scaleY=-1;oBridge1.scaleX=-1;oBridge1.x=CANVAS_WIDTH;oBridge1.y=CANVAS_HEIGHT-140;s_oStage.addChild(oBridge1);_oInterface=new CInterface;this._initLevel();if(s_bMobile===false){document.onkeydown=onKeyDown;document.onkeyup=onKeyUp}_oHelpPanel=new CHelpPanel;_oHammer=new Hammer(s_oCanvas);_oHammer.get("swipe").set({direction:Hammer.DIRECTION_ALL});_oHammer.get("swipe").set({velocity:.01});_oHammer.get("swipe").set({threshold:10});_oHammer.on("swipeleft",function(){s_oGame.onLeftPress()});_oHammer.on("swiperight",function(){s_oGame.onRightPress()});_oHammer.on("swipeup",function(){s_oGame.onUpPress()});_oHammer.on("swipedown",function(){s_oGame.onDownPress()});if(s_bMobile){s_oCanvas.addEventListener("touchend",s_oGame.onUpPress,false)}else{s_oStage.on("click",function(){s_oGame.onUpPress()})}};this._initLevel=function(){_bStartGame=false;_bFrogOnSupport=false;_bLevelInProgress=false;_iFrogInNest=0;_iTimeFlySpawn=0;_oWater=new CWater(220,_aGridMatrix[9][0].y,_oPosOffset.y,s_iCurLevel,_oWaterContainer);_oStreet=new CStreet(_aGridMatrix[3][0].y,_oPosOffset.y,s_iCurLevel);_aStreetLaneTimeElaps=new Array;for(var i=0;i<5;i++){_aStreetLaneTimeElaps[i]=_oStreet.getLaneInfo(i).occur}_aWaterLaneTimeElaps=new Array;for(var i=0;i<5;i++){_aWaterLaneTimeElaps[i]=_oWater.getLaneInfo(i).occur}$(s_oMain).trigger("start_level",s_iCurLevel+1);_aCar=new Array;var iRandPosX;var iRandType;for(var i=0;i<STREET_LANE_OCCURENCE.length;i++){iRandPosX=Math.random()*CANVAS_WIDTH/2;iRandType=Math.floor(Math.random()*10);_aCar.push(new CCar(_oStreet.getLaneInfo(i),iRandType,_oTrafficContainer));_aCar[i].instantCar(iRandPosX+CANVAS_WIDTH/4,_oStreet.getLaneInfo(i).pos)}_aSupport=new Array;_aNest=new Array;_aNest[2]="free";_aNest[5]="free";_aNest[8]="free";_aNest[11]="free";_aNest[14]="free";_aElementsToRemove=new Array;_aFrogToRemove=new Array;_aSinkTurtleOccur[0]=_iVarInitSinkOccur;_aSinkTurtleOccur[1]=_iVarInitSinkOccur;_oCurLogicPos={row:FROG_STARTING_LOGIC_POS.row,col:FROG_STARTING_LOGIC_POS.col};var oStartFrogPos={x:_aGridMatrix[_oCurLogicPos.row][_oCurLogicPos.col].x,y:_aGridMatrix[_oCurLogicPos.row][_oCurLogicPos.col].y};_oFrog=new CFrog(oStartFrogPos.x,oStartFrogPos.y,_oFrogContainer)};function onKeyUp(evt){if(!_bStartGame){return}_bBlockKeyboard=false;evt.preventDefault()}function onKeyDown(evt){if(!evt){evt=window.event}if(_bBlockKeyboard){return}_bBlockKeyboard=true;evt.preventDefault();switch(evt.keyCode){case 37:{s_oGame.onLeftPress();break}case 38:{s_oGame.onUpPress();break}case 39:{s_oGame.onRightPress();break}case 40:{s_oGame.onDownPress();break}}}this.onUpPress=function(){if(_bBlockMovement){return}_bBlockMovement=true;var iPos=_oFrog.getPos().y-V_MOVE;if(iPos<_aGridMatrix[_iNumVertCel-1][0].y){iPos=_aGridMatrix[_iNumVertCel-1][0].y}_oFrog.move(_oFrog.getPos().x,iPos,"up",iPos)};this.onDownPress=function(){if(_bBlockMovement){return}_bBlockMovement=true;var iPos=_oFrog.getPos().y+V_MOVE;if(iPos>_aGridMatrix[0][0].y){iPos=_aGridMatrix[0][0].y}_oFrog.move(_oFrog.getPos().x,iPos,"down",iPos)};this.onLeftPress=function(){if(_bBlockMovement){return}_bBlockMovement=true;var iPos=_oFrog.getPos().x-H_MOVE;if(iPos<_aGridMatrix[0][0].x){iPos=_aGridMatrix[0][0].x}_oFrog.move(iPos,_oFrog.getPos().y,"left",iPos)};this.onRightPress=function(){if(_bBlockMovement){return}_bBlockMovement=true;var iPos=_oFrog.getPos().x+H_MOVE;if(iPos>_aGridMatrix[0][_iNumHorizCel-1].x){iPos=_aGridMatrix[0][_iNumHorizCel-1].x}_oFrog.move(iPos,_oFrog.getPos().y,"right",iPos)};this.updateLogicPos=function(){for(var i=0;i<_iNumVertCel;i++){for(var j=0;j<_iNumHorizCel;j++){if(_oFrog.getPos().x>=_aGridMatrix[i][j].x-_oPosOffset.x/2&&_oFrog.getPos().x<=_aGridMatrix[i][j].x+_oPosOffset.x/2){_oCurLogicPos.col=j}if(_oFrog.getPos().y>=_aGridMatrix[i][j].y-_oPosOffset.y/2&&_oFrog.getPos().y<=_aGridMatrix[i][j].y+_oPosOffset.y/2){_oCurLogicPos.row=i}}}};this.updateScore=function(iValue){s_iScore+=iValue;if(s_iScore<0){s_iScore=0}_oInterface.refreshScore(s_iScore)};this.unload=function(){_oInterface.unload();if(_oEndPanel!==null){_oEndPanel.unload()}for(var i=0;i<_aCar.length;i++){_aCar[i].unload()}for(var i=0;i<_aSupport.length;i++){_aSupport[i].unload()}_oHammer.off("swipeleft",function(){_oParent._swipeControl("left")});_oHammer.off("swiperight",function(){_oParent._swipeControl("right")});_oHammer.off("swipeup",function(){_oParent._swipeControl("up")});_oHammer.off("swipedown",function(){_oParent._swipeControl("down")});if(s_bMobile){s_oCanvas.removeEventListener("touchend",s_oGame.onUpPress,false)}else{s_oStage.off("pressup",function(){s_oGame.onUpPress()})}createjs.Tween.removeAllTweens();s_oStage.removeAllChildren()};this.onExit=function(){setVolume(s_oSoundtrack,1);this.unload();s_oMain.gotoMenu()};this._onExitHelp=function(){_bStartGame=true;_bLevelInProgress=true;_bBlockKeyboard=false;_bBlockMovement=false;_oInterface.refreshBar()};this.gameOver=function(){setVolume(s_oSoundtrack,.3);for(var i=0;i<_aSupport.length;i++){_aSupport[i].stopAnim()}_bLevelInProgress=false;createjs.Tween.removeAllTweens();_oEndPanel=CEndPanel(s_oSpriteLibrary.getSprite("msg_box"));_oEndPanel.show(s_iScore)};this._updateLives=function(szMode){if(szMode==="add"){_iLives++}else{_iLives--}_oInterface.refreshLives(_iLives);if(_iLives===0){_oFrog.setTextVisible(false);this.gameOver()}};this.reset=function(){for(var i=0;i<_aCar.length;i++){_aCar[i].unload()}for(var i=0;i<_aSupport.length;i++){_aSupport[i].unload()}for(var i=0;i<_aFrogToRemove.length;i++){_aFrogToRemove[i].unload()}var iIncreaseSink=s_iCurLevel%NUM_LEVEL_INCREASE_SINK;if(iIncreaseSink===0){_iVarInitSinkOccur--}if(_iVarInitSinkOccur<0){_iVarInitSinkOccur=0}_oInterface.refreshBar();this._initLevel();_bLevelInProgress=true;_bStartGame=true};this._checkNewLevel=function(){_iFrogInNest++;if(_iFrogInNest===5){$(s_oMain).trigger("end_level",s_iCurLevel+1);$(s_oMain).trigger("save_score",[s_iScore]);s_iCurLevel++;_oFrog.setTextVisible(false);_oInterface.stopBar();_bStartGame=false;_bBlockMovement=true;_bBlockKeyboard=true;var oLevelPanel=new CLevelPanel(s_iCurLevel);oLevelPanel.show(s_iScore)}};this.addElemToRemoveList=function(oElem){var iIndex;var szType;if(oElem.getType()==="car"){for(var j=0;j<_aCar.length;j++){if(_aCar[j]===oElem){iIndex=j;szType="car"}}}else{for(var j=0;j<_aSupport.length;j++){if(_aSupport[j]===oElem){iIndex=j;szType="support"}}}_aElementsToRemove.push({elem:oElem,index:iIndex,type:szType})};this.freeCell=function(iCell){_aNest[iCell]="free"};this._generateFly=function(){_iTimeFlySpawn+=s_iTimeElaps;if(_iTimeFlySpawn>TIME_FLY_TO_SPAWN){_iTimeFlySpawn=0;var aFreeSpot=new Array;for(var i=0;i<_aNest.length;i++){if(_aNest[i]==="free"){aFreeSpot.push(i)}}if(aFreeSpot.length>0){shuffle(aFreeSpot);_oFly=new CFly(_aGridMatrix[14][aFreeSpot[0]].x,_aGridMatrix[14][aFreeSpot[0]].y,aFreeSpot[0]);_aNest[aFreeSpot[0]]="fly"}}};this._generateNewFrog=function(){if(_iLives===0){return}_oCurLogicPos={row:FROG_STARTING_LOGIC_POS.row,col:FROG_STARTING_LOGIC_POS.col};_oFrog=new CFrog(_aGridMatrix[_oCurLogicPos.row][_oCurLogicPos.col].x,_aGridMatrix[_oCurLogicPos.row][_oCurLogicPos.col].y,_oFrogContainer);_oInterface.refreshBar();_bStartGame=true;_bBlockMovement=false};this._generateCar=function(){for(var i=0;i<_aStreetLaneTimeElaps.length;i++){_aStreetLaneTimeElaps[i]+=s_iTimeElaps;if(_aStreetLaneTimeElaps[i]>_oStreet.getLaneInfo(i).occur){_aStreetLaneTimeElaps[i]=0;var iType=Math.floor(Math.random()*10);_aCar.push(new CCar(_oStreet.getLaneInfo(i),iType,_oTrafficContainer));_aCar[_aCar.length-1].playHornet(_oCurLogicPos.row)}}};this._generateSupport=function(){for(var i=0;i<_aWaterLaneTimeElaps.length;i++){_aWaterLaneTimeElaps[i]+=s_iTimeElaps;if(_aWaterLaneTimeElaps[i]>_oWater.getLaneInfo(i).occur){_aWaterLaneTimeElaps[i]=0;if(i===0){if(_aSinkTurtleOccur[0]===0){for(var j=0;j<NUM_CONSECUTIVE_TURTLE_0;j++){_aSupport.push(new CTurtle(_oWater.getLaneInfo(i),1,j*TURTLE_OFFSET,_oSupportContainer))}_aSinkTurtleOccur[0]=_iVarInitSinkOccur+1}else{for(var j=0;j<NUM_CONSECUTIVE_TURTLE_0;j++){_aSupport.push(new CTurtle(_oWater.getLaneInfo(i),0,j*TURTLE_OFFSET,_oSupportContainer))}}_aSinkTurtleOccur[0]--}else if(i===3){if(_aSinkTurtleOccur[1]===0){for(var j=0;j<NUM_CONSECUTIVE_TURTLE_3;j++){_aSupport.push(new CTurtle(_oWater.getLaneInfo(i),1,j*TURTLE_OFFSET,_oSupportContainer))}_aSinkTurtleOccur[1]=_iVarInitSinkOccur+1}else{for(var j=0;j<NUM_CONSECUTIVE_TURTLE_3;j++){_aSupport.push(new CTurtle(_oWater.getLaneInfo(i),0,j*TURTLE_OFFSET,_oSupportContainer))}}_aSinkTurtleOccur[1]--}else{_aSupport.push(new CTrunk(_oWater.getLaneInfo(i),_oSupportContainer))}}}};this.update=function(){if(_bStartGame){var rFrogRect=_oFrog.getLogicRect();if(_oCurLogicPos.row===14){if(_aNest[_oCurLogicPos.col]==="free"||_aNest[_oCurLogicPos.col]==="fly"){playSound("frog_arrived",1,0);var bFlyScore=false;if(_aNest[_oCurLogicPos.col]==="fly"){playSound("eat_fly",1,0);bFlyScore=true;_oFly.unload()}if(bFlyScore){this.updateScore(SCORE_WITH_FLY)}else{this.updateScore(SCORE_IN_NEST)}this._checkNewLevel();_aNest[_oCurLogicPos.col]="taken";_oFrog.setPos(_aGridMatrix[_oCurLogicPos.row][_oCurLogicPos.col].x,_aGridMatrix[_oCurLogicPos.row][_oCurLogicPos.col].y);_oCurLogicPos.row=0;_aFrogToRemove.push(_oFrog);_oFrog.great();if(_iFrogInNest<5){this._generateNewFrog()}}else if(_aNest[_oCurLogicPos.col]==="taken"){_oFrog.unload();this._generateNewFrog()}else{_oFrog.crash();this._updateLives("sub");_bStartGame=false;this._generateNewFrog();this.updateScore(SCORE_DEATH)}}else if(_oCurLogicPos.row>8&&_oCurLogicPos.row<14&&!_bBlockMovement){for(var i=0;i<_aSupport.length;i++){if(_aSupport[i].getLogicRect()!==null){if(_aSupport[i].getLogicRect().intersects(rFrogRect)){var iSpeed=_aSupport[i].getSpeed();if(_oFrog.getPos().x>=_aGridMatrix[0][0].x&&_oFrog.getPos().x<=_aGridMatrix[0][16].x){_oFrog.carry(iSpeed)}else if(_oFrog.getPos().x<_aGridMatrix[0][0].x){_oFrog.setPos(_aGridMatrix[0][0].x,_oFrog.getPos().y)}else{_oFrog.setPos(_aGridMatrix[0][16].x,_oFrog.getPos().y)}_bFrogOnSupport=true}}}if(!_bFrogOnSupport){_bBlockMovement=true;this._updateLives("sub");_oFrog.drown();_oFrog.unload();_oDrownContainer.addChild(_oFrog.getContainer());_bStartGame=false;this._generateNewFrog();this.updateScore(SCORE_DEATH)}}else{for(var i=0;i<_aCar.length;i++){var rCarRect=_aCar[i].getLogicRect();if(rCarRect.intersects(rFrogRect)){_bBlockMovement=true;this._updateLives("sub");_bStartGame=false;_oFrog.splat();this._generateNewFrog();this.updateScore(SCORE_DEATH)}}}if(!_oFrog.getDead()&&!_oFrog.isJumping()){_bBlockMovement=false}_bFrogOnSupport=false}if(_bLevelInProgress){this._generateCar();this._generateSupport();this._generateFly();_oWater.update();for(var i=0;i<_aCar.length;i++){_aCar[i].update()}for(var i=0;i<_aSupport.length;i++){_aSupport[i].update()}_aElementsToRemove.sort(compare);for(var i=0;i<_aElementsToRemove.length;i++){_aElementsToRemove[i].elem.unload();if(_aElementsToRemove[i].type==="car"){_aCar.splice(_aElementsToRemove[i].index,1)}else{_aSupport.splice(_aElementsToRemove[i].index,1)}}_aElementsToRemove=new Array}};s_oGame=this;LIVES=oData.lives;LEVEL_TIME=oData.crossing_time;SCORE_IN_NEST=oData.score_in_nest;SCORE_WITH_FLY=oData.score_with_fly;SCORE_DEATH=oData.score_death;FROG_SPEED=oData.frog_speed;SINK_TURTLE_OCCURRENCY=oData.sink_turtle_occurrency;NUM_LEVEL_INCREASE_SINK=oData.num_level_increase_sink;TIME_FLY_TO_SPAWN=oData.time_fly_to_spawn;TIME_FLY_TO_DISAPPEAR=oData.time_fly_to_disappear;STREET_LANE_TIMESPEED=oData.street_lane_timespeed;STREET_TIMESPEED_DECREASE_PER_LEVEL=oData.street_timespeed_decrease_per_level;STREET_LANE_OCCURENCE=oData.street_lane_occurrence;STREET_OCCURENCE_DECREASE_PER_LEVEL=oData.street_occurrence_decrease_per_level;WATER_LANE_TIMESPEED=oData.water_lane_timespeed;WATER_TIMESPEED_DECREASE_PER_LEVEL=oData.water_timespeed_decrease_per_level;WATER_LANE_OCCURENCE=oData.water_lane_occurrence;WATER_OCCURENCE_INCREASE_PER_LEVEL=oData.water_occurrence_increase_per_level;_oParent=this;this._init()}var s_oGame;function CInterface(){var _oAudioToggle;var _oButExit;var _oHelpPanel=null;var _oScoreText;var _oScoreNum;var _oScoreNumTextOutline;var _oTimeText;var _oBarFill;var _oMask;var _oLifeText;var _oInfoBg;var _oLifeContainer;var _pStartPosExit;var _pStartPosAudio;var _pStartPosLife;this._init=function(){var oSprite=s_oSpriteLibrary.getSprite("gui_panel_top");var oTopPanel=createBitmap(oSprite);s_oStage.addChild(oTopPanel);var oExitX;var microgamesSprite=s_oSpriteLibrary.getSprite("microgames");var microgames=createBitmap(microgamesSprite);microgames.x=(CANVAS_WIDTH-microgamesSprite.width)/2;microgames.y=5;s_oStage.addChild(microgames);var oSprite=s_oSpriteLibrary.getSprite("but_exit");_pStartPosExit={x:CANVAS_WIDTH-oSprite.height/2-5,y:oSprite.height/2+5};oExitX=CANVAS_WIDTH-oSprite.width/2-5;_pStartPosAudio={x:oExitX,y:oSprite.height/2+5};if(DISABLE_SOUND_MOBILE===false||s_bMobile===false){var oSprite=s_oSpriteLibrary.getSprite("audio_icon");_oAudioToggle=new CToggle(_pStartPosAudio.x,_pStartPosAudio.y,oSprite,s_bAudioActive);_oAudioToggle.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this)}_oLifeContainer=new createjs.Container;_pStartPosLife={x:14,y:14};_oLifeContainer.x=_pStartPosLife.x;_oLifeContainer.y=_pStartPosLife.y;s_oStage.addChild(_oLifeContainer);var oSprite=s_oSpriteLibrary.getSprite("life");var oLife=createBitmap(oSprite);_oLifeContainer.addChild(oLife);_oLifeText=new createjs.Text("X"+LIVES,"bold 40px "+PRIMARY_FONT,"#fcff00");_oLifeText.x=56;_oLifeText.y=34;_oLifeText.textAlign="left";_oLifeText.textBaseline="alphabetic";_oLifeText.lineWidth=200;_oLifeContainer.addChild(_oLifeText);var oSprite=s_oSpriteLibrary.getSprite("gui_panel_bottom");_oInfoBg=createBitmap(oSprite);_oInfoBg.regY=oSprite.height;_oInfoBg.y=CANVAS_HEIGHT;s_oStage.addChild(_oInfoBg);var oInfoContainer=new createjs.Container;oInfoContainer.x=370;oInfoContainer.y=940;s_oStage.addChild(oInfoContainer);_oTimeText=new createjs.Text(TEXT_TIME,"bold 40px "+PRIMARY_FONT,"#fcff00");_oTimeText.x=10;_oTimeText.y=0;_oTimeText.textAlign="left";_oTimeText.textBaseline="alphabetic";_oTimeText.lineWidth=200;oInfoContainer.addChild(_oTimeText);var oTimeTextOutline=new createjs.Text(TEXT_TIME,"bold 40px "+PRIMARY_FONT,"#000000");oTimeTextOutline.x=10;oTimeTextOutline.y=0;oTimeTextOutline.textAlign="left";oTimeTextOutline.textBaseline="alphabetic";oTimeTextOutline.lineWidth=200;oTimeTextOutline.outline=3;oInfoContainer.addChild(oTimeTextOutline);var oSprite=s_oSpriteLibrary.getSprite("time_bar_fill");_oBarFill=createBitmap(oSprite);_oBarFill.x=10;_oBarFill.y=18;oInfoContainer.addChild(_oBarFill);_oMask=new createjs.Shape;_oMask.graphics.beginFill("rgba(255,0,0,0.01)").drawRect(0,0,oSprite.width,oSprite.height);_oMask.x=10;_oMask.y=18;oInfoContainer.addChild(_oMask);_oBarFill.mask=_oMask;var oSprite=s_oSpriteLibrary.getSprite("time_bar_frame");var oBarFrame=createBitmap(oSprite);oBarFrame.x=7;oBarFrame.y=15;oInfoContainer.addChild(oBarFrame);_oScoreText=new createjs.Text(TEXT_SCORE,"bold 40px "+PRIMARY_FONT,"#fcff00");_oScoreText.x=10;_oScoreText.y=110;_oScoreText.textAlign="left";_oScoreText.textBaseline="alphabetic";_oScoreText.lineWidth=200;oInfoContainer.addChild(_oScoreText);var oScoreTextOutline=new createjs.Text(TEXT_SCORE,"bold 40px "+PRIMARY_FONT,"#000000");oScoreTextOutline.x=10;oScoreTextOutline.y=110;oScoreTextOutline.textAlign="left";oScoreTextOutline.textBaseline="alphabetic";oScoreTextOutline.lineWidth=200;oScoreTextOutline.outline=3;oInfoContainer.addChild(oScoreTextOutline);_oScoreNum=new createjs.Text("0","bold 36px "+PRIMARY_FONT,"#fcff00");_oScoreNum.x=10;_oScoreNum.y=155;_oScoreNum.textAlign="left";_oScoreNum.textBaseline="alphabetic";_oScoreNum.lineWidth=200;oInfoContainer.addChild(_oScoreNum);_oScoreNumTextOutline=new createjs.Text("0","bold 36px "+PRIMARY_FONT,"#000000");_oScoreNumTextOutline.x=10;_oScoreNumTextOutline.y=155;_oScoreNumTextOutline.textAlign="left";_oScoreNumTextOutline.textBaseline="alphabetic";_oScoreNumTextOutline.lineWidth=200;_oScoreNumTextOutline.outline=3;oInfoContainer.addChild(_oScoreNumTextOutline);this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.refreshButtonPos=function(iNewX,iNewY){if(DISABLE_SOUND_MOBILE===false||s_bMobile===false){_oAudioToggle.setPosition(_pStartPosAudio.x-iNewX,iNewY+_pStartPosAudio.y)}_oLifeContainer.x=_pStartPosLife.x+iNewX;_oLifeContainer.y=iNewY+_pStartPosLife.y};this.unload=function(){if(DISABLE_SOUND_MOBILE===false||s_bMobile===false){_oAudioToggle.unload();_oAudioToggle=null}s_oInterface=null};this.refreshScore=function(iValue){_oScoreNum.text=iValue;_oScoreNumTextOutline.text=iValue};this.refreshLives=function(iLives){_oLifeText.text="X"+iLives};this.refreshBar=function(){_oMask.scaleX=1;createjs.Tween.get(_oMask,{override:true}).to({scaleX:0},LEVEL_TIME,createjs.Ease.linear).call(function(){s_oGame.gameOver()})};this.stopBar=function(){createjs.Tween.removeTweens(_oMask)};this._onButHelpRelease=function(){_oHelpPanel=new CHelpPanel};this._onButRestartRelease=function(){s_oGame.restartGame()};this.onExitFromHelp=function(){_oHelpPanel.unload()};this._onAudioToggle=function(){createjs.Sound.setMute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onExit=function(){$(s_oMain).trigger("end_level",s_iCurLevel+1);$(s_oMain).trigger("end_session");$(s_oMain).trigger("share_event",s_iScore);s_oGame.onExit()};s_oInterface=this;this._init();return this}var s_oInterface=null;function CHelpPanel(){var _oText1;var _oText1Back;var _oText2;var _oText2Back;var _oText3;var _oText3Back;var _oText4;var _oText4Back;var _oMessage1;var _oMessage2;var _oHelpBg;var _oGroup;this._init=function(){var oSprite;if(s_bMobile===false){_oMessage1=TEXT_HELP1;oSprite=s_oSpriteLibrary.getSprite("bg_help_desktop")}else{_oMessage1=TEXT_HELP_MOB1;oSprite=s_oSpriteLibrary.getSprite("bg_help")}_oHelpBg=createBitmap(oSprite);s_oStage.addChild(_oHelpBg);var oPos={x:290,y:220,shadow:4};_oText1Back=new createjs.Text(_oMessage1,"bold 18px "+PRIMARY_FONT,"#000000");_oText1Back.textAlign="left";_oText1Back.x=oPos.x+oPos.shadow;_oText1Back.y=oPos.y+oPos.shadow;_oText1Back.textBaseline="alphabetic";_oText1Back.lineWidth=380;_oText1=new createjs.Text(_oMessage1,"bold 18px "+PRIMARY_FONT,"#fcff00");_oText1.textAlign="left";_oText1.x=oPos.x;_oText1.y=oPos.y;_oText1.textBaseline="alphabetic";_oText1.lineWidth=380;_oText2Back=new createjs.Text(TEXT_HELP2,"bold 22px "+PRIMARY_FONT,"#000000");_oText2Back.textAlign="left";_oText2Back.x=oPos.x+oPos.shadow+250;_oText2Back.y=oPos.y+190+oPos.shadow;_oText2Back.textBaseline="alphabetic";_oText2Back.lineWidth=250;_oText2=new createjs.Text(TEXT_HELP2,"bold 22px "+PRIMARY_FONT,"#fcff00");_oText2.textAlign="left";_oText2.x=oPos.x+250;_oText2.y=oPos.y+190;_oText2.textBaseline="alphabetic";_oText2.lineWidth=250;_oText3Back=new createjs.Text(TEXT_HELP3,"bold 22px "+PRIMARY_FONT,"#000000");_oText3Back.textAlign="left";_oText3Back.x=oPos.x+oPos.shadow;_oText3Back.y=oPos.y+320+oPos.shadow;_oText3Back.textBaseline="alphabetic";_oText3Back.lineWidth=250;_oText3=new createjs.Text(TEXT_HELP3,"bold 22px "+PRIMARY_FONT,"#fcff00");_oText3.textAlign="left";_oText3.x=oPos.x;_oText3.y=oPos.y+320;_oText3.textBaseline="alphabetic";_oText3.lineWidth=250;_oText4Back=new createjs.Text(TEXT_HELP4,"bold 22px "+PRIMARY_FONT,"#000000");_oText4Back.textAlign="left";_oText4Back.x=oPos.x+oPos.shadow+170;_oText4Back.y=oPos.y+492+oPos.shadow;_oText4Back.textBaseline="alphabetic";_oText4Back.lineWidth=350;_oText4=new createjs.Text(TEXT_HELP4,"bold 22px "+PRIMARY_FONT,"#fcff00");_oText4.textAlign="left";_oText4.x=oPos.x+170;_oText4.y=oPos.y+492;_oText4.textBaseline="alphabetic";_oText4.lineWidth=350;_oGroup=new createjs.Container;_oGroup.addChild(_oHelpBg,_oText1Back,_oText1,_oText2Back,_oText2,_oText3Back,_oText3,_oText4Back,_oText4);s_oStage.addChild(_oGroup);var oParent=this;_oGroup.on("pressup",function(){oParent._onExitHelp()})};this.unload=function(){s_oStage.removeChild(_oGroup);var oParent=this;_oGroup.off("pressup",function(){oParent._onExitHelp()})};this._onExitHelp=function(){this.unload();s_oGame._onExitHelp()};this._init()}function CEndPanel(oSpriteBg){var _oBg;var _oGroup;var _oMsgTextBack;var _oMsgText;var _oScoreTextBack;var _oScoreText;this._init=function(oSpriteBg){_oBg=createBitmap(oSpriteBg);_oBg.x=0;_oBg.y=0;_oMsgTextBack=new createjs.Text("","bold 60px "+PRIMARY_FONT,"#000000");_oMsgTextBack.x=CANVAS_WIDTH/2+4;_oMsgTextBack.y=CANVAS_HEIGHT/2-160;_oMsgTextBack.textAlign="center";_oMsgText=new createjs.Text("","bold 60px "+PRIMARY_FONT,"#fcff00");_oMsgText.x=CANVAS_WIDTH/2;_oMsgText.y=CANVAS_HEIGHT/2-164;_oMsgText.textAlign="center";_oScoreTextBack=new createjs.Text("","bold 40px "+PRIMARY_FONT,"#000000");_oScoreTextBack.x=CANVAS_WIDTH/2+4;_oScoreTextBack.y=CANVAS_HEIGHT/2+54;_oScoreTextBack.textAlign="center";_oScoreText=new createjs.Text("","bold 40px "+PRIMARY_FONT,"#fcff00");_oScoreText.x=CANVAS_WIDTH/2;_oScoreText.y=CANVAS_HEIGHT/2+50;_oScoreText.textAlign="center";_oGroup=new createjs.Container;_oGroup.alpha=0;_oGroup.visible=false;_oGroup.addChild(_oBg,_oScoreTextBack,_oScoreText,_oMsgTextBack,_oMsgText);s_oStage.addChild(_oGroup)};this.unload=function(){_oGroup.off("mousedown",this._onExit)};this._initListener=function(){_oGroup.on("mousedown",this._onExit)};this.show=function(iScore){playSound("game_over",1,0);_oMsgTextBack.text=TEXT_GAMEOVER;_oMsgText.text=TEXT_GAMEOVER;_oScoreTextBack.text=TEXT_SCORE+": "+iScore;_oScoreText.text=TEXT_SCORE+": "+iScore;_oGroup.visible=true;var oParent=this;createjs.Tween.get(_oGroup).to({alpha:1},500).call(function(){oParent._initListener()});$(s_oMain).trigger("save_score",[iScore]);$(s_oMain).trigger("end_level",s_iCurLevel);$(s_oMain).trigger("share_event",iScore)};this._onExit=function(){_oGroup.off("mousedown",this._onExit);s_oStage.removeChild(_oGroup);$(s_oMain).trigger("end_session");$(s_oMain).trigger("show_interlevel_ad");s_oGame.onExit()};this._init(oSpriteBg);return this}function CWinText(szType,iX,iY,bVisible){var _oText;var _oTextOutline;var _oTextContainer;this._init=function(szType,iX,iY,bVisible){_oTextContainer=new createjs.Container;_oTextContainer.x=iX;_oTextContainer.y=iY-60;_oTextContainer.alpha=0;_oTextContainer.visible=bVisible;s_oStage.addChild(_oTextContainer);_oText=new createjs.Text("","bold 30px "+PRIMARY_FONT,"#fcff00");_oText.textAlign="center";_oText.text=szType;_oText.textBaseline="alphabetic";_oTextContainer.addChild(_oText);_oTextOutline=new createjs.Text("","bold 30px "+PRIMARY_FONT,"#000000");_oTextOutline.textAlign="center";_oTextOutline.text=szType;_oTextOutline.outline=3;_oTextOutline.textBaseline="alphabetic";_oTextContainer.addChild(_oTextOutline);var oParent=this};this.great=function(){_oTextContainer.scaleX=0;_oTextContainer.scaleY=0;_oTextContainer.alpha=1;var oParent=this;createjs.Tween.get(_oTextContainer).to({scaleX:1,scaleY:1},100,createjs.Ease.linear).wait(2e3).call(function(){oParent.unload()})};this.splat=function(){var oParent=this;createjs.Tween.get(_oTextContainer).to({alpha:1},300,createjs.Ease.linear).to({alpha:0},2500,createjs.Ease.linear);createjs.Tween.get(_oTextContainer).wait(2e3).to({alpha:0},500,createjs.Ease.linear).call(function(){oParent.unload()})};this.crash=function(){var oParent=this;createjs.Tween.get(_oTextContainer).to({alpha:1},300,createjs.Ease.linear).to({alpha:0},2500,createjs.Ease.linear);createjs.Tween.get(_oTextContainer).wait(2e3).to({alpha:0},500,createjs.Ease.linear).call(function(){oParent.unload()})};this.drown=function(){_oTextContainer.scaleX=0;_oTextContainer.scaleY=0;_oTextContainer.alpha=0;_oTextContainer.y=iY;var oParent=this;createjs.Tween.get(_oTextContainer).to({alpha:1},2500,createjs.Ease.linear).to({alpha:0},2500,createjs.Ease.linear);createjs.Tween.get(_oTextContainer).to({scaleX:1,scaleY:1},5e3,createjs.Ease.linear).call(function(){oParent.unload()})};this.unload=function(){s_oStage.removeChild(_oTextContainer)};this._init(szType,iX,iY,bVisible)}function CFrog(iX,iY,oParentContainer){var _bDead;var _bJumping;var _bTextVisible;var _iWidth;var _iHeight;var _iSpeed;var _oRect;var _oFrog;var _oSkidMarks;var _oContainer;this._init=function(iX,iY,oParentContainer){_bDead=false;_bJumping=false;_bTextVisible=true;_iWidth=50;_iHeight=75;_iSpeed=FROG_SPEED;_oRect={w:10,h:25};_oContainer=new createjs.Container;_oContainer.x=iX;_oContainer.y=iY;oParentContainer.addChild(_oContainer);var oSprite=s_oSpriteLibrary.getSprite("frog");var oData={images:[oSprite],frames:{width:_iWidth,height:_iHeight,regX:_iWidth/2,regY:_iHeight/2},animations:{idle:[0],jump:[1,5,"idle"],splat:[6],drown:[7,44,"drown_stop"],drown_stop:[44],skid_marks:[45]}};var oSpriteSheet=new createjs.SpriteSheet(oData);_oFrog=createSprite(oSpriteSheet,"jump",0,0,_iWidth,_iHeight);_oContainer.addChild(_oFrog);_oSkidMarks=createBitmap(s_oSpriteLibrary.getSprite("skid_rows"));_oSkidMarks.regX=_iWidth/2;_oSkidMarks.regY=_iHeight/2;_oSkidMarks.visible=false;_oContainer.addChild(_oSkidMarks)};this.unload=function(){oParentContainer.removeChild(_oContainer)};this._disappear=function(){var oParent=this;createjs.Tween.get(_oContainer).wait(2e3).to({alpha:0},2e3,createjs.Ease.linear).call(function(){oParent.unload()})};this.move=function(iX,iY,szType,iPos){_bJumping=true;playSound("jump",1,0);switch(szType){case"up":{_oFrog.rotation=0;break}case"down":{_oFrog.rotation=180;break}case"left":{_oFrog.rotation=270;break}case"right":{_oFrog.rotation=90;break}}_oFrog.gotoAndPlay("jump");createjs.Tween.get(_oContainer).to({x:iX,y:iY},_iSpeed,createjs.Ease.linear).call(function(){s_oGame.updateLogicPos();_bJumping=false});createjs.Tween.get(_oContainer).to({scaleX:1.5,scaleY:1.5},_iSpeed/2,createjs.Ease.quintIn).to({scaleX:1,scaleY:1},_iSpeed/2,createjs.Ease.quintIn)};this.isJumping=function(){return _bJumping};this.setTextVisible=function(bVal){_bTextVisible=bVal};this.drown=function(){playSound("drown",1,0);_bDead=true;_oFrog.gotoAndPlay("drown");var oComic=new CWinText(TEXT_DROWN,this.getPos().x,this.getPos().y,_bTextVisible);oComic.drown();this._disappear()};this.splat=function(){playSound("splat",1,0);_oFrog.gotoAndPlay("splat");_oSkidMarks.visible=true;_bDead=true;var oComic=new CWinText(TEXT_SPLAT,this.getPos().x,this.getPos().y,_bTextVisible);oComic.splat();this._disappear()};this.crash=function(){playSound("splat",1,0);_oFrog.gotoAndPlay("splat");_bDead=true;var oComic=new CWinText(TEXT_SPLAT,this.getPos().x,this.getPos().y,_bTextVisible);oComic.splat();this._disappear()};this.great=function(){var oComic=new CWinText(TEXT_GREAT,this.getPos().x,this.getPos().y,_bTextVisible);oComic.great()};this.getDead=function(){return _bDead};this.setPos=function(iX,iY){_oContainer.x=iX;_oContainer.y=iY};this.getPos=function(){return{x:_oContainer.x,y:_oContainer.y}};this.getContainer=function(){return _oContainer};this.getLogicRect=function(){return new createjs.Rectangle(_oContainer.x-_oRect.w/2,_oContainer.y-_oRect.h/2,_oRect.w,_oRect.h)};this.carry=function(iValue){_oContainer.x+=iValue};this._init(iX,iY,oParentContainer)}function CWater(iXPos,iFirstLanePos,iOffset,iCurLevel,oParentContainer){var _bVal;var _iFrame;var _iMaxFrames;var _iLeftPos;var _iRightPos;var _aWater;var _aLanes;var _oWaterContainer;this._init=function(iXPos,iFirstLanePos,iOffset,iCurLevel,oParentContainer){_bVal=true;_iFrame=0;_iMaxFrames=9;_aWater=new Array;_oWaterContainer=new createjs.Container;_oWaterContainer.x=iXPos;_oWaterContainer.y=iFirstLanePos-280;oParentContainer.addChild(_oWaterContainer);var szTag;for(var i=0;i<10;i++){szTag="water_anim_"+i;_aWater[i]=createBitmap(s_oSpriteLibrary.getSprite(szTag));_aWater[i].visible=false;_oWaterContainer.addChild(_aWater[i])}_aWater[0].visible=true;_aLanes=new Array;_iLeftPos=-UNLOAD_OFFSET+EDGEBOARD_X;_iRightPos=CANVAS_WIDTH+UNLOAD_OFFSET-EDGEBOARD_X;if(iCurLevel>MAX_LEVEL_DIFFICULTY){iCurLevel=MAX_LEVEL_DIFFICULTY}var aSpeed=new Array;for(var i=0;i<WATER_LANE_TIMESPEED.length;i++){aSpeed[i]=WATER_LANE_TIMESPEED[i]+iCurLevel*WATER_TIMESPEED_DECREASE_PER_LEVEL[i]}var aOccur=new Array;for(var i=0;i<WATER_LANE_OCCURENCE.length;i++){aOccur[i]=WATER_LANE_OCCURENCE[i]+iCurLevel*WATER_OCCURENCE_INCREASE_PER_LEVEL[i]}_aLanes[0]={pos:iFirstLanePos-0*iOffset,start:_iRightPos,end:_iLeftPos,speed:aSpeed[0],occur:aOccur[0]};_aLanes[1]={pos:iFirstLanePos-1*iOffset,start:_iLeftPos,end:_iRightPos,speed:aSpeed[1],occur:aOccur[1]};_aLanes[2]={pos:iFirstLanePos-2*iOffset,start:_iLeftPos,end:_iRightPos,speed:aSpeed[2],occur:aOccur[2]};_aLanes[3]={pos:iFirstLanePos-3*iOffset,start:_iRightPos,end:_iLeftPos,speed:aSpeed[3],occur:aOccur[3]};_aLanes[4]={pos:iFirstLanePos-4*iOffset,start:_iLeftPos,end:_iRightPos,speed:aSpeed[4],occur:aOccur[4]}};this.getLaneInfo=function(iNumLane){return _aLanes[iNumLane]};this.update=function(){_bVal=!_bVal;if(_iFrame===0){_aWater[_iMaxFrames].visible=false;_aWater[0].visible=true}else{_aWater[_iFrame-1].visible=false;_aWater[_iFrame].visible=true}if(_bVal){_iFrame++}if(_iFrame>_iMaxFrames){_iFrame=0}};this._init(iXPos,iFirstLanePos,iOffset,iCurLevel,oParentContainer)}function CStreet(iFirstLanePos,iOffset,iCurLevel){var _aLanes;var _iLeftPos;var _iRightPos;this.init=function(iFirstLanePos,iOffset,iCurLevel){_aLanes=new Array;_iLeftPos=-UNLOAD_OFFSET+EDGEBOARD_X;_iRightPos=CANVAS_WIDTH+UNLOAD_OFFSET-EDGEBOARD_X;if(iCurLevel>MAX_LEVEL_DIFFICULTY){iCurLevel=MAX_LEVEL_DIFFICULTY}var aRandSpeed=new Array;for(var i=0;i<STREET_LANE_TIMESPEED.length;i++){aRandSpeed[i]=STREET_LANE_TIMESPEED[i]+iCurLevel*STREET_TIMESPEED_DECREASE_PER_LEVEL[i]}shuffle(aRandSpeed);var aRandOccur=new Array;for(var i=0;i<STREET_LANE_OCCURENCE.length;i++){aRandOccur[i]=STREET_LANE_OCCURENCE[i]+iCurLevel*STREET_OCCURENCE_DECREASE_PER_LEVEL[i]}shuffle(aRandOccur);var iVerse;
var iStartPos;var iEndPos;for(var i=0;i<5;i++){iVerse=i%2;if(iVerse===0){iStartPos=_iRightPos;iEndPos=_iLeftPos}else{iStartPos=_iLeftPos;iEndPos=_iRightPos}_aLanes[i]={pos:iFirstLanePos-i*iOffset,start:iStartPos,end:iEndPos,speed:aRandSpeed[i],occur:aRandOccur[i]}}};this.getLaneInfo=function(iNumLane){return _aLanes[iNumLane]};this.init(iFirstLanePos,iOffset,iCurLevel)}function CCar(oInfo,iType,oParentContainer){var _bGone;var _szVerse;var _iTimeElaps;var _iWidth;var _iHeight;var _iEnd;var _oCar;var _oInfo;var _oParent;this.init=function(oInfo,iType,oParentContainer){_bGone=false;_iTimeElaps=0;_oInfo={pos:oInfo.pos,start:oInfo.start,end:oInfo.end,speed:oInfo.speed,occur:oInfo.occur};var szTag="car_"+iType;var oSprite=s_oSpriteLibrary.getSprite(szTag);_iWidth=oSprite.width;_iHeight=oSprite.height;_oCar=createBitmap(oSprite);_oCar.x=_oInfo.start;_oCar.y=_oInfo.pos;_oCar.regX=_iWidth/2;_oCar.regY=_iHeight/2;if(_oInfo.start<_oInfo.end){_oCar.rotation=180;_szVerse="right"}else{_szVerse="left"}_iEnd=_oInfo.end;oParentContainer.addChild(_oCar)};this.unload=function(){oParentContainer.removeChild(_oCar)};this.playHornet=function(oFrogPos){var iRandomHornet=Math.random();if((DISABLE_SOUND_MOBILE===false||s_bMobile===false)&&iRandomHornet<.66&&oFrogPos>2&&oFrogPos<8){if(iType===0||iType===1){playSound("big_hornet",1,0)}else{playSound("small_hornet",1,0)}}};this.instantCar=function(iX){_oInfo.speed=oInfo.speed/2;_oInfo.start=iX};this.setPos=function(iX,iY){_oCar.x=iX;_oCar.y=iY};this.getType=function(){return"car"};this.setGone=function(bVal){_bGone=bVal};this.getGone=function(){return _bGone};this.getLogicRect=function(){return new createjs.Rectangle(_oCar.x-_iWidth/2,_oCar.y-_iHeight/2,_iWidth,_iHeight)};this.update=function(){if(_bGone){return}_iTimeElaps+=s_iTimeElaps;var fLerp=easeLinear(_iTimeElaps,0,1,_oInfo.speed);var iNewX=tweenVectorsOnX(_oInfo.start,_iEnd,fLerp);_oCar.x=iNewX;if(_szVerse==="right"&&_oCar.x>_iEnd||_szVerse==="left"&&_oCar.x<_iEnd){_bGone=true;s_oGame.addElemToRemoveList(this)}};_oParent=this;this.init(oInfo,iType,oParentContainer)}function CTrunk(oInfo,oParentContainer){var _bGone;var _szVerse;var _iWidth;var _iHeight;var _iSpeed;var _iEnd;var _iTimeElaps;var _iMoveOffset;var _iPrevX;var shape;var _oRect;var _oTrunk;var _oInfo;var _oParent;var _oParentContainer;this.init=function(oInfo,oParentContainer){_bGone=false;_iWidth=222;_iHeight=50;_iTimeElaps=0;_oRect={w:190,h:40};_oInfo=oInfo;_oParentContainer=oParentContainer;var oSprite=s_oSpriteLibrary.getSprite("trunk");var oData={images:[oSprite],frames:{width:_iWidth,height:_iHeight,regX:_iWidth/2,regY:_iHeight/2},animations:{idle:[0,14]}};var oSpriteSheet=new createjs.SpriteSheet(oData);_oTrunk=createSprite(oSpriteSheet,"idle",0,0,_iWidth,_iHeight);_oTrunk.x=_oInfo.start;_oTrunk.y=_oInfo.pos;if(_oInfo.start<_oInfo.end){_oTrunk.rotation=180;_szVerse="right"}else{_szVerse="left"}_iEnd=_oInfo.end;_oParentContainer.addChild(_oTrunk)};this.unload=function(){_oParentContainer.removeChild(_oTrunk)};this.stopAnim=function(){_oTrunk.stop()};this.getType=function(){return"support"};this.getPos=function(){return{x:_oTrunk.x,y:_oTrunk.y}};this.getSpeed=function(){return _iMoveOffset};this.setGone=function(bVal){_bGone=bVal};this.getGone=function(){return _bGone};this.getLogicRect=function(){return new createjs.Rectangle(_oTrunk.x-_oRect.w/2,_oTrunk.y-_oRect.h/2,_oRect.w,_oRect.h)};this.update=function(){if(_bGone){return}_iTimeElaps+=s_iTimeElaps;var fLerp=easeLinear(_iTimeElaps,0,1,oInfo.speed);var iNewX=tweenVectorsOnX(oInfo.start,_iEnd,fLerp);_iPrevX=_oTrunk.x;_oTrunk.x=iNewX;_iMoveOffset=iNewX-_iPrevX;if(_szVerse==="right"&&_oTrunk.x>_iEnd||_szVerse==="left"&&_oTrunk.x<_iEnd){_bGone=true;s_oGame.addElemToRemoveList(this)}};_oParent=this;this.init(oInfo,oParentContainer)}function CTurtle(oInfo,iType,iOffset,oParentContainer){var _bGone;var _szVerse;var _iWidth;var _iHeight;var _iStart;var _iEnd;var _iTimeElaps;var _iMoveOffset;var _iPrevX;var _oRect;var _oTurtle;var _oInfo;var _oParent;var _oParentContainer;this.init=function(oInfo,iType,iOffset,oParentContainer){_bGone=false;_iWidth=74;_iHeight=74;_iTimeElaps=0;_oRect={w:70,h:50};_oInfo=oInfo;_oParentContainer=oParentContainer;var oAnim;if(iType===0){oAnim={idle:[0,33]}}else{oAnim={idle:[0,99]}}var oSprite=s_oSpriteLibrary.getSprite("turtle");var oData={images:[oSprite],frames:{width:_iWidth,height:_iHeight,regX:_iWidth/2,regY:_iHeight/2},animations:oAnim};var oSpriteSheet=new createjs.SpriteSheet(oData);_oTurtle=createSprite(oSpriteSheet,"idle",0,0,_iWidth,_iHeight);_oTurtle.y=_oInfo.pos;_iStart=_oInfo.start+iOffset;if(_oInfo.start<_oInfo.end){_oTurtle.rotation=180;_szVerse="right"}else{_szVerse="left"}_iEnd=_oInfo.end+iOffset-100;_oParentContainer.addChild(_oTurtle)};this.unload=function(){_oParentContainer.removeChild(_oTurtle)};this.stopAnim=function(){_oTurtle.stop()};this.getType=function(){return"support"};this.getPos=function(){return{x:_oTurtle.x,y:_oTurtle.y}};this.getSpeed=function(){return _iMoveOffset};this.setGone=function(bVal){_bGone=bVal};this.getGone=function(){return _bGone};this.getLogicRect=function(){if(_oTurtle.currentAnimationFrame<40||_oTurtle.currentAnimationFrame>90){return new createjs.Rectangle(_oTurtle.x-_oRect.w/2,_oTurtle.y-_oRect.h/2,_oRect.w,_oRect.h)}else{return null}};this.update=function(){if(_bGone){return}_iTimeElaps+=s_iTimeElaps;var fLerp=easeLinear(_iTimeElaps,0,1,oInfo.speed);var iNewX=tweenVectorsOnX(_iStart,_iEnd,fLerp);_iPrevX=_oTurtle.x;_oTurtle.x=iNewX;_iMoveOffset=iNewX-_iPrevX;if(_szVerse==="right"&&_oTurtle.x>_iEnd||_szVerse==="left"&&_oTurtle.x<_iEnd){_bGone=true;s_oGame.addElemToRemoveList(this)}};_oParent=this;this.init(oInfo,iType,iOffset,oParentContainer)}function CLevelPanel(iCurLevel){var _oBg;var _oGroup;var _oMsgTextBack;var _oMsgText;var _oScoreTextBack;var _oScoreText;this._init=function(iCurLevel){_oBg=createBitmap(s_oSpriteLibrary.getSprite("msg_box"));_oBg.x=0;_oBg.y=0;_oMsgTextBack=new createjs.Text("","bold 45px "+PRIMARY_FONT,"#000000");_oMsgTextBack.x=CANVAS_WIDTH/2+4;_oMsgTextBack.y=CANVAS_HEIGHT/2-100;_oMsgTextBack.textAlign="center";_oMsgText=new createjs.Text("","bold 45px "+PRIMARY_FONT,"#fcff00");_oMsgText.x=CANVAS_WIDTH/2;_oMsgText.y=CANVAS_HEIGHT/2-104;_oMsgText.textAlign="center";_oScoreTextBack=new createjs.Text("","bold 40px "+PRIMARY_FONT,"#000000");_oScoreTextBack.x=CANVAS_WIDTH/2+4;_oScoreTextBack.y=CANVAS_HEIGHT/2+4;_oScoreTextBack.textAlign="center";_oScoreText=new createjs.Text("","bold 40px "+PRIMARY_FONT,"#fcff00");_oScoreText.x=CANVAS_WIDTH/2;_oScoreText.y=CANVAS_HEIGHT/2;_oScoreText.textAlign="center";_oGroup=new createjs.Container;_oGroup.alpha=0;_oGroup.visible=false;_oGroup.addChild(_oBg,_oScoreTextBack,_oScoreText,_oMsgTextBack,_oMsgText);s_oStage.addChild(_oGroup)};this.unload=function(){_oGroup.off("mousedown",this._onExit)};this._initListener=function(){_oGroup.on("mousedown",this._onExit)};this.show=function(iScore){playSound("win_level",1,0);var oParent=this;oParent._initListener();_oMsgTextBack.text=TEXT_LEVELEND+iCurLevel+TEXT_COMPLETEEND;_oMsgText.text=TEXT_LEVELEND+iCurLevel+TEXT_COMPLETEEND;_oScoreTextBack.text=TEXT_SCORE+" "+iScore;_oScoreText.text=TEXT_SCORE+" "+iScore;_oGroup.visible=true;createjs.Tween.get(_oGroup).to({alpha:1},500);$(s_oMain).trigger("save_score",iScore)};this._onExit=function(){_oGroup.off("mousedown",this._onExit);s_oStage.removeChild(_oGroup);s_oGame.reset()};this._init(iCurLevel);return this}function CFly(iX,iY,iCell){var _oFly;this._init=function(iX,iY,iCell){var oSprite=s_oSpriteLibrary.getSprite("fly");_oFly=createBitmap(oSprite);_oFly.x=iX;_oFly.y=iY;_oFly.regX=oSprite.width/2;_oFly.regY=oSprite.height/2;s_oStage.addChild(_oFly);var oParent=this;createjs.Tween.get(_oFly).wait(TIME_FLY_TO_DISAPPEAR).call(function(){oParent.unload();s_oGame.freeCell(iCell)})};this.unload=function(){createjs.Tween.removeTweens(_oFly);s_oStage.removeChild(_oFly)};this._init(iX,iY,iCell)}$(document).ready(function(){var oMain=new CMain({lives:3,crossing_time:6e4,score_in_nest:100,score_with_fly:300,score_death:-50,frog_speed:100,sink_turtle_occurrency:4,num_level_increase_sink:5,time_fly_to_spawn:7e3,time_fly_to_disappear:3e3,street_lane_timespeed:[12e3,1e4,9e3,7e3,6e3],street_timespeed_decrease_per_level:[-150,-150,-250,-150,-250],street_lane_occurrence:[3500,3700,3900,4100,4300],street_occurrence_decrease_per_level:[-100,-100,-100,-100,-100],water_lane_timespeed:[13e3,1e4,8e3,1e4,1e4],water_timespeed_decrease_per_level:[-150,-150,-250,-150,-150],water_lane_occurrence:[5e3,4e3,3e3,3500,5e3],water_occurrence_increase_per_level:[50,50,50,50,50]});$(oMain).on("save_score",function(evt,score){if(score>0){window.MicroGame.saveScore(score)}});$(oMain).on("share_score",function(evt){window.MicroGame.shareScore()});if(isIOS()){setTimeout(function(){sizeHandler()},200)}else{sizeHandler()}});
